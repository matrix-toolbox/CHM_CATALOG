(* 20170330 *)
(* exemplary extension of the M_13X matrix (found by A. LaClair) to the n-parametric maximal affine family for X=B(n=2) and X=C(n=3) *)

n=13; (* matrix size *)

M13BLF = {
{0,0,0,0,0,0,0,0,0,0,0,0,0},
{0,5,5,5,3,3,3,3,2,2,1,0,0},
{0,1,1,3,1,3,4,5,1,3,5,3,5},
{0,3,0,1,3,1,5,3,0,4,1,4,3},
{0,1,3,4,5,1,1,3,4,4,1,2,5},
{0,3,5,3,5,5,3,0,2,0,1,2,3},
{0,5,3,1,1,4,1,5,4,2,1,4,3},
{0,5,3,1,5,1,3,1,2,4,4,4,1},
{0,2,0,4,4,2,1,0,4,2,4,5,2},
{0,4,0,2,2,4,1,2,4,5,4,2,0},
{0,0,3,5,3,3,5,1,0,0,3,2,3},
{0,2,2,0,2,0,3,4,3,0,4,0,4},
{0,3,3,3,0,5,5,3,0,2,3,0,1}}; (* Butson LOG-form *)

M13B = Exp[M13BLF*I*2*Pi/6];

Norm[M13B.ConjugateTranspose[M13B]-DiagonalMatrix[ConstantArray[n,n]]]//FullSimplify (* CHM confirmation - should be 0 *)


Clear[R,S]
R=ConstantArray[1,{n,n}];
Do[R[[j]][[k]]=Exp[I*t*S[j,k]],{j,2,n},{k,2,n}]; (* S is a dummy variable *)
M13BR=M13B*R;
M=ConjugateTranspose[M13BR].M13BR;
M=FullSimplify[M,Element[{t,
S[2,2],S[2,3],S[2,4],S[2,5],S[2,6],S[2,7],S[2,8],S[2,9],S[2,10],S[2,11],S[2,12],S[2,13],
S[3,2],S[3,3],S[3,4],S[3,5],S[3,6],S[3,7],S[3,8],S[3,9],S[3,10],S[3,11],S[3,12],S[3,13],
S[4,2],S[4,3],S[4,4],S[4,5],S[4,6],S[4,7],S[4,8],S[4,9],S[4,10],S[4,11],S[4,12],S[4,13],
S[5,2],S[5,3],S[5,4],S[5,5],S[5,6],S[5,7],S[5,8],S[5,9],S[5,10],S[5,11],S[5,12],S[5,13],
S[6,2],S[6,3],S[6,4],S[6,5],S[6,6],S[6,7],S[6,8],S[6,9],S[6,10],S[6,11],S[6,12],S[6,13],
S[7,2],S[7,3],S[7,4],S[7,5],S[7,6],S[7,7],S[7,8],S[7,9],S[7,10],S[7,11],S[7,12],S[7,13],
S[8,2],S[8,3],S[8,4],S[8,5],S[8,6],S[8,7],S[8,8],S[8,9],S[8,10],S[8,11],S[8,12],S[8,13],
S[9,2],S[9,3],S[9,4],S[9,5],S[9,6],S[9,7],S[9,8],S[9,9],S[9,10],S[9,11],S[9,12],S[9,13],
S[10,2],S[10,3],S[10,4],S[10,5],S[10,6],S[10,7],S[10,8],S[10,9],S[10,10],S[10,11],S[10,12],S[10,13],
S[11,2],S[11,3],S[11,4],S[11,5],S[11,6],S[11,7],S[11,8],S[11,9],S[11,10],S[11,11],S[11,12],S[11,13],
S[12,2],S[12,3],S[12,4],S[12,5],S[12,6],S[12,7],S[12,8],S[12,9],S[12,10],S[12,11],S[12,12],S[12,13],
S[13,2],S[13,3],S[13,4],S[13,5],S[13,6],S[13,7],S[13,8],S[13,9],S[13,10],S[13,11],S[13,12],S[13,13]},Reals]];
Limit[D[M,t],t->0]
(* output from above shoud be input for the next command, where every term is set to == 0 (excluding some zero-terms) *)


NSolve[
{... == 0, 
},{
S[2,2],S[2,3],S[2,4],S[2,5],S[2,6],S[2,7],S[2,8],S[2,9],S[2,10],S[2,11],S[2,12],S[2,13],
S[3,2],S[3,3],S[3,4],S[3,5],S[3,6],S[3,7],S[3,8],S[3,9],S[3,10],S[3,11],S[3,12],S[3,13],
S[4,2],S[4,3],S[4,4],S[4,5],S[4,6],S[4,7],S[4,8],S[4,9],S[4,10],S[4,11],S[4,12],S[4,13],
S[5,2],S[5,3],S[5,4],S[5,5],S[5,6],S[5,7],S[5,8],S[5,9],S[5,10],S[5,11],S[5,12],S[5,13],
S[6,2],S[6,3],S[6,4],S[6,5],S[6,6],S[6,7],S[6,8],S[6,9],S[6,10],S[6,11],S[6,12],S[6,13],
S[7,2],S[7,3],S[7,4],S[7,5],S[7,6],S[7,7],S[7,8],S[7,9],S[7,10],S[7,11],S[7,12],S[7,13],
S[8,2],S[8,3],S[8,4],S[8,5],S[8,6],S[8,7],S[8,8],S[8,9],S[8,10],S[8,11],S[8,12],S[8,13],
S[9,2],S[9,3],S[9,4],S[9,5],S[9,6],S[9,7],S[9,8],S[9,9],S[9,10],S[9,11],S[9,12],S[9,13],
S[10,2],S[10,3],S[10,4],S[10,5],S[10,6],S[10,7],S[10,8],S[10,9],S[10,10],S[10,11],S[10,12],S[10,13],
S[11,2],S[11,3],S[11,4],S[11,5],S[11,6],S[11,7],S[11,8],S[11,9],S[11,10],S[11,11],S[11,12],S[11,13],
S[12,2],S[12,3],S[12,4],S[12,5],S[12,6],S[12,7],S[12,8],S[12,9],S[12,10],S[12,11],S[12,12],S[12,13],
S[13,2],S[13,3],S[13,4],S[13,5],S[13,6],S[13,7],S[13,8],S[13,9],S[13,10],S[13,11],S[13,12],S[13,13]
}]//Chop

(* solution, provided that it exists, should be in a form of linear dependencies between S[j, k] variables *)
(* here we have: 
S[2,4]   =  S[13,12]
S[2,6]   =  S[13,12]
S[2,10]  =  S[13,12]
S[2,12]  =  S[13,12]
S[4,4]   =  S[13,12]
S[4,6]   =  S[13,12]
S[4,10]  =  S[13,12]
S[4,12]  =  S[13,12]
S[5,2]   = -S[13,12]
S[5,3]   = -S[13,12]
S[5,5]   = -S[13,12]
S[5,8]   = -S[13,12]
S[5,11]  = -S[13,12]
S[5,13]  = -S[13,12]
S[6,4]   =  S[13,12]
S[6,6]   =  S[13,12]
S[6,10]  =  S[13,12]
S[6,12]  =  S[13,12]
S[7,2]   = -S[13,12]
S[7,3]   = -S[13,12]
S[7,5]   = -S[13,12]
S[7,8]   = -S[13,12]
S[7,11]  = -S[13,12]
S[7,13]  = -S[13,12]
S[8,4]   =  S[13,12]
S[8,6]   =  S[13,12]
S[8,10]  =  S[13,12]
S[8,12]  =  S[13,12]
S[9,2]   = -S[13,12]
S[9,3]   = -S[13,12]
S[9,5]   = -S[13,12]
S[9,8]   = -S[13,12]
S[9,11]  = -S[13,12]
S[9,13]  = -S[13,12]
S[10,2]  = -S[13,12]
S[10,3]  = -S[13,12]
S[10,5]  = -S[13,12]
S[10,8]  = -S[13,12]
S[10,11] = -S[13,12]
S[10,13] = -S[13,12]
S[11,4]  =  S[13,12]
S[11,6]  =  S[13,12]
S[11,10] =  S[13,12]
S[11,12] =  S[13,12]
S[13,4]  =  S[13,12]
S[13,6]  =  S[13,12]
S[13,10] =  S[13,12];

while the rest vanish, hence let a := S[13,12] be a free parameter and we have the following affine family:
*)

a=RandomReal[];

M13B={
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 5, 5, 5, 3, 3, 3, 3, 2, 2, 1, 0, 0},
{0, 1, 1, 3, 1, 3, 4, 5, 1, 3, 5, 3, 5},
{0, 3, 0, 1, 3, 1, 5, 3, 0, 4, 1, 4, 3},
{0, 1, 3, 4, 5, 1, 1, 3, 4, 4, 1, 2, 5},
{0, 3, 5, 3, 5, 5, 3, 0, 2, 0, 1, 2, 3},
{0, 5, 3, 1, 1, 4, 1, 5, 4, 2, 1, 4, 3},
{0, 5, 3, 1, 5, 1, 3, 1, 2, 4, 4, 4, 1},
{0, 2, 0, 4, 4, 2, 1, 0, 4, 2, 4, 5, 2},
{0, 4, 0, 2, 2, 4, 1, 2, 4, 5, 4, 2, 0},
{0, 0, 3, 5, 3, 3, 5, 1, 0, 0, 3, 2, 3},
{0, 2, 2, 0, 2, 0, 3, 4, 3, 0, 4, 0, 4},
{0, 3, 3, 3, 0, 5, 5, 3, 0, 2, 3, 0, 1}};

H=Exp[I*2*Pi*M13B/6];

R={
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, a, 0, a, 0, 0, 0, a, 0, a, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, a, 0, a, 0, 0, 0, a, 0, a, 0},
{0,-a,-a, 0,-a, 0, 0,-a, 0, 0,-a, 0,-a},
{0, 0, 0, a, 0, a, 0, 0, 0, a, 0, a, 0},
{0,-a,-a, 0,-a, 0, 0,-a, 0, 0,-a, 0,-a},
{0, 0, 0, a, 0, a, 0, 0, 0, a, 0, a, 0},
{0,-a,-a, 0,-a, 0, 0,-a, 0, 0,-a, 0,-a},
{0,-a,-a, 0,-a, 0, 0,-a, 0, 0,-a, 0,-a},
{0, 0, 0, a, 0, a, 0, 0, 0, a, 0, a, 0},
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
{0, 0, 0, a, 0, a, 0, 0, 0, a, 0, a, 0}};
H=H*Exp[I*2*Pi*R]//N;
H.ConjugateTranspose[H]//Chop//MatrixForm


